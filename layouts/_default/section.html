{{ define "widgets" }}
    {{ $ctx := . }}
    {{ range .Site.Params.widgets.section }}
        {{ $path := replace "widgets/X.html" "X" .}}
        {{- partial $path $ctx -}}
    {{ end }}
{{ end }}

{{ define "blocks" }}
    {{ $ctx := . }}
    {{ range .Site.Params.blocks.section }}
        {{ $path := replace "blocks/X.html" "X" .}}
        {{- partial $path $ctx -}}
    {{ end }}
{{ end }}
